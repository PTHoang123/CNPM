{"ast":null,"code":"var _jsxFileName = \"/Users/mac/CNPM/food-delivery/src/pages/CheckOut.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// filepath: src/pages/Checkout.jsx\nimport React, { useState, useEffect } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements, useStripe, useElements, CardElement } from \"@stripe/react-stripe-js\";\nimport { Container, Row, Col } from \"reactstrap\";\nimport CommonSection from \"../components/UI/CommonSection\";\nimport Helmet from \"../components/Helmet\";\nimport \"../styles/checkout.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\nfunction CheckoutForm({\n  cartItems,\n  shippingCost\n}) {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [enterName, setEnterName] = useState(\"\");\n  const [enterEmail, setEnterEmail] = useState(\"\");\n  const [enterNumber, setEnterNumber] = useState(\"\");\n  const [enterCountry, setEnterCountry] = useState(\"\");\n  const [enterCity, setEnterCity] = useState(\"\");\n  const [postalCode, setPostalCode] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const total = cartItems.reduce((sum, it) => sum + it.price * it.quantity, 0);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    // 1) Create Stripe session on backend\n    const res = await fetch(\"http://localhost:8000/api/payments/create-checkout-session\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        items: cartItems.map(it => ({\n          title: it.title,\n          price: it.price,\n          quantity: it.quantity,\n          imageUrl: it.image\n        })),\n        shippingCost,\n        customer: {\n          name: enterName,\n          email: enterEmail\n        }\n      })\n    });\n    const {\n      sessionId\n    } = await res.json();\n    // 2) Redirect to Stripe Checkout\n    const {\n      error\n    } = await stripe.redirectToCheckout({\n      sessionId\n    });\n    if (error) alert(error.message);\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"checkout__form\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form__group\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter your name\",\n        required: true,\n        onChange: e => setEnterName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form__group\",\n      children: /*#__PURE__*/_jsxDEV(CardElement, {\n        options: {\n          hidePostalCode: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"addTOCart__btn\",\n      disabled: loading || !stripe,\n      children: loading ? \"Processing…\" : `Pay $${(total + shippingCost).toFixed(2)}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(CheckoutForm, \"ZdXsXoSI+BNIimqGVtMjJwGRYxg=\", false, function () {\n  return [useStripe, useElements];\n});\n_c = CheckoutForm;\nconst Checkout = () => {\n  _s2();\n  const [cartItems, setCartItems] = useState([]);\n  const shippingCost = 30;\n  useEffect(() => {\n    fetch(\"http://localhost:8000/api/cart\").then(r => r.json()).then(setCartItems);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Helmet, {\n    title: \"Checkout\",\n    children: [/*#__PURE__*/_jsxDEV(CommonSection, {\n      title: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"8\",\n            md: \"6\",\n            children: /*#__PURE__*/_jsxDEV(Elements, {\n              stripe: stripePromise,\n              children: /*#__PURE__*/_jsxDEV(CheckoutForm, {\n                cartItems: cartItems,\n                shippingCost: shippingCost\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s2(Checkout, \"yMyLm0mTOdUD4xRL2vnEhQFbjeY=\");\n_c2 = Checkout;\nexport default Checkout;\nvar _c, _c2;\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"Checkout\");","map":{"version":3,"names":["React","useState","useEffect","loadStripe","Elements","useStripe","useElements","CardElement","Container","Row","Col","CommonSection","Helmet","jsxDEV","_jsxDEV","stripePromise","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","CheckoutForm","cartItems","shippingCost","_s","stripe","elements","enterName","setEnterName","enterEmail","setEnterEmail","enterNumber","setEnterNumber","enterCountry","setEnterCountry","enterCity","setEnterCity","postalCode","setPostalCode","loading","setLoading","total","reduce","sum","it","price","quantity","handleSubmit","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","items","map","title","imageUrl","image","customer","name","email","sessionId","json","error","redirectToCheckout","alert","message","className","onSubmit","children","type","placeholder","required","onChange","target","value","fileName","_jsxFileName","lineNumber","columnNumber","options","hidePostalCode","disabled","toFixed","_c","Checkout","_s2","setCartItems","then","r","lg","md","_c2","$RefreshReg$"],"sources":["/Users/mac/CNPM/food-delivery/src/pages/CheckOut.jsx"],"sourcesContent":["// filepath: src/pages/Checkout.jsx\nimport React, { useState, useEffect } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport {\n  Elements,\n  useStripe,\n  useElements,\n  CardElement,\n} from \"@stripe/react-stripe-js\";\nimport { Container, Row, Col } from \"reactstrap\";\nimport CommonSection from \"../components/UI/CommonSection\";\nimport Helmet from \"../components/Helmet\";\nimport \"../styles/checkout.css\";\n\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n\nfunction CheckoutForm({ cartItems, shippingCost }) {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const [enterName, setEnterName] = useState(\"\");\n  const [enterEmail, setEnterEmail] = useState(\"\");\n  const [enterNumber, setEnterNumber] = useState(\"\");\n  const [enterCountry, setEnterCountry] = useState(\"\");\n  const [enterCity, setEnterCity] = useState(\"\");\n  const [postalCode, setPostalCode] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const total = cartItems.reduce(\n    (sum, it) => sum + it.price * it.quantity,\n    0\n  );\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // 1) Create Stripe session on backend\n    const res = await fetch(\"http://localhost:8000/api/payments/create-checkout-session\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        items: cartItems.map((it) => ({\n          title: it.title,\n          price: it.price,\n          quantity: it.quantity,\n          imageUrl: it.image,\n        })),\n        shippingCost,\n        customer: {\n          name: enterName,\n          email: enterEmail,\n        },\n      }),\n    });\n    const { sessionId } = await res.json();\n    // 2) Redirect to Stripe Checkout\n    const { error } = await stripe.redirectToCheckout({ sessionId });\n    if (error) alert(error.message);\n    setLoading(false);\n  };\n\n  return (\n    <form className=\"checkout__form\" onSubmit={handleSubmit}>\n      {/* shipping fields */}\n      <div className=\"form__group\">\n        <input type=\"text\" placeholder=\"Enter your name\" required\n               onChange={(e) => setEnterName(e.target.value)} />\n      </div>\n      {/* … other shipping fields … */}\n      {/* Stripe card input */}\n      <div className=\"form__group\">\n        <CardElement options={{ hidePostalCode: true }} />\n      </div>\n      <button type=\"submit\" className=\"addTOCart__btn\" disabled={loading || !stripe}>\n        {loading ? \"Processing…\" : `Pay $${(total + shippingCost).toFixed(2)}`}\n      </button>\n    </form>\n  );\n}\n\nconst Checkout = () => {\n  const [cartItems, setCartItems] = useState([]);\n  const shippingCost = 30;\n\n  useEffect(() => {\n    fetch(\"http://localhost:8000/api/cart\")\n      .then((r) => r.json())\n      .then(setCartItems);\n  }, []);\n\n  return (\n    <Helmet title=\"Checkout\">\n      <CommonSection title=\"Checkout\" />\n      <section>\n        <Container>\n          <Row>\n            <Col lg=\"8\" md=\"6\">\n              <Elements stripe={stripePromise}>\n                <CheckoutForm cartItems={cartItems} shippingCost={shippingCost} />\n              </Elements>\n            </Col>\n            {/* summary panel… */}\n          </Row>\n        </Container>\n      </section>\n    </Helmet>\n  );\n};\n\nexport default Checkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}